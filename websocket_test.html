<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/style.css">
	<title>Team Roots</title>
	<style>
		#welcome {
			width: 360px;
			margin: 0 auto 60px;
			color: gray;
		}

		#log {
			display: inline-block;
			width: 700px;
			text-align: left;
			word-wrap: break-word;
		}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="http://www.parsecdn.com/js/parse-1.5.0.min.js"></script>
	<script src="js/layer.js"></script>
	<script>
		Parse.initialize("pya3k6c4LXzZMy6PwMH80kJx4HD2xF6duLSSdYUl", "nsAogGRd3LmObBE5jk1E3pilVTDbPGAEHpTZwvob");

		var currentUser = Parse.User.current();
		if (!currentUser) window.location = "counselor_login.html";
	</script>
</head>
<body>
	<div id="container">
		<img id="title" src="img/team-roots-logo.png">

		<div id="welcome">
			<p>Welcome to Team Roots, <span id="counselor-name"></span>!<br></p>
		</div>

		<code id="log"></code>
	</div>

	<script>
		document.getElementById("counselor-name").textContent = currentUser.get("name");

		function log(msg) {
			var p = document.createElement("p");
			p.textContent = msg;
			document.getElementById("log").appendChild(p);
		}

		var ws = new WebSocket('wss://api.layer.com/websocket?session_token=' + localStorage["layer_session_token"], 'layer-1.0');
		ws.addEventListener("open", function (e) { log("websocket open"); });
		ws.addEventListener("message", function (e) { log("message recieved: " + e.data); });
	</script>

	<div id="footer">
		<a href="mailto:spencer@teamroots.org" class="get-notified">Contact us</a>
	</div>
</body>
</html>
